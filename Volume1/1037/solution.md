# A decorative fence

## 题目

给定 n

求按字典序第 c 个符合以下条件的全排列

排列中除了第 1 个和第 n 个数，每个数都必须同时比两边的数大或同时比两边的数小


## 方法

动态规划

设 f[n][k], g[n][k] 分别表示长度为 n、以 k 开头、比第 2 个数大/小的全排列数

则

f[n][k] = sum{g[n - 1][i]}, 1 <= i < k

g[n][k] = sum{f[n - 1][i]}, k <= i < n

1 <= k <= n

根据 f, g 我们可以算出第 c 个全排列：

排列中的第 1 个数为最小的 j 使得 sum{f[n][k] + g[n][k]} >= c, 1 <= k <= j

因为不等式左侧为以 j 或比 j 小 开头的全排列数

用 c 减去 sum{f[n][k] + g[n][k]}, 1 <= k < j，转化为求 n - 1 个数的第 c 个全排列

同上不断找最小的 j 满足全排列数不小于 c，且倒数第二个数比倒数第一个数大/小时 j 应大于/小于倒数第一个数，而 c 不断减小

最后得到所有的 j 即为所求全排列
