# Triangle War

## 题目

给定如图所示 18 条虚线或实线堆叠而成的三角形

两人轮流将其中一条虚线画成实线

若某条实线与相邻两条实线构成小三角形，则该小三角形归画该实线者所有，且该游戏者必须再画一条虚线

不能画实线则游戏结束，拥有小三角形多者胜

求最优策略下，谁获胜


## 方法

博弈

先对每条线编号，用二进制来表示状态：18 条线的虚实

对当前局面，模拟更新状态及两人的得分

然后使用以下两种方法之一判断是否先手胜

1. 极小化极大算法 + Alpha-beta剪枝

    搜索时枚举当前状态能画的线，不断更新状态、得分及 alpha 和 beta 的值

    剪枝：当某一方分数不少于 5 时必胜

2. 动态规划

    设 f[state] 表示状态为 state 时先手比后手多得的小三角形数

    则 f[state] = max{(score ? 1 : -1) * f[state_next] + score}

    其中 state_next 为从 state 画一条线转移的状态，score 为状态转移后得到的小三角形数

    若读入局面的得分与 (先手 ? 1 : -1) * f[state] 之和大于 0 则先手胜
