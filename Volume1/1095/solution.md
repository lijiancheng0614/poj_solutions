# Trees Made to Order

## 题目

给定一种二叉树编号规则：

1. 若为空，则编号为0

2. 若只有一个点，则编号为1

3. 所有含 m 个节点的二叉树的编号小于所有含 m + 1 个节点的二叉树的编号

4. 若一棵含有 m 个节点的二叉树（左子树为L，右子树为R）的编号为n，其它含有 m 个节点的二叉树的编号若大于n，则需要满足两个条件中的任意一个：

    1. 左子树的编号大于 L 的编号

    2. 左子树的编号等于 L 的编号，但是右子树的编号大于 R 的编号

输入编号

求该编号的树


## 方法

数学

n 个点不同形态的二叉树数量即 Catalan 数

对编号为 n 的二叉树，点数即 max{k | sum{catalan[k]} < n}

故问题可转换为求 k 个点的二叉树中序号为 n - sum{catalan[k]} 的二叉树

设左子树的点数为 i，则右子树的点数为 k - i - 1

i = max{i | sum{catalan[j] * catalan[k - j - 1] < n | 0 <= j <= i}}

故问题可转换为求左子树点数为 i、右子树点数为 k - i - 1 的二叉树中序号为 n - sum{catalan[j] * catalan[k - j - 1] | 0 <= j <= i} 的二叉树

此时左子树的编号为 (n - sum - 1) / catalan[n - i - 1] + 1，右子树的编号为 (n - sum - 1) % catalan[n - i - 1] + 1

依此递归即可，最终 k = 1 时直接输出
